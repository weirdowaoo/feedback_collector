# MCP åé¦ˆæ”¶é›†å™¨

**ä¸­æ–‡ç‰ˆæœ¬** | [English Version](README.md)

åé¦ˆæ”¶é›†å·¥å…·ï¼Œæ”¯æŒæ–‡å­—å’Œå›¾ç‰‡åé¦ˆï¼Œé‡‡ç”¨æ·±è‰²ä¸»é¢˜è®¾è®¡ã€‚

## ğŸŒ Web ç‰ˆæœ¬å¯ç”¨

**[MCP åé¦ˆæ”¶é›†å™¨ï¼ˆWeb ç‰ˆï¼‰](https://github.com/weirdowaoo/feedback_collector_web)** ä¸“é—¨ä¸ºé€šè¿‡ SSH è¿æ¥åˆ°è¿œç¨‹æœåŠ¡å™¨è¿›è¡Œå¼€å‘çš„åœºæ™¯è®¾è®¡ã€‚Web ç‰ˆè§£å†³äº†ä¼ ç»Ÿæœ¬åœ°å›¾å½¢ç•Œé¢åé¦ˆæ”¶é›†æ–¹å¼åœ¨è¿œç¨‹å¼€å‘ç¯å¢ƒä¸­æ— æ³•ä½¿ç”¨çš„é™åˆ¶ã€‚

ğŸ”„ **é¡¹ç›®å…³ç³»**
- **æœ¬é¡¹ç›®**ï¼šä¼ ç»Ÿçš„æœ¬åœ°å›¾å½¢ç•Œé¢åé¦ˆæ”¶é›†å·¥å…·
- **Web ç‰ˆæœ¬**ï¼šä¸“ä¸ºè¿œç¨‹å¼€å‘ç¯å¢ƒè®¾è®¡çš„ Web ç‰ˆæœ¬
- **æ ¹æ®éœ€æ±‚é€‰æ‹©åˆé€‚çš„å·¥å…·**ï¼š
  - å¦‚æœä½ åœ¨æœ¬åœ°å¼€å‘å¹¶åå¥½åŸç”Ÿå›¾å½¢ç•Œé¢ï¼Œè¯·ä½¿ç”¨æœ¬é¡¹ç›®
  - å¦‚æœä½ é€šè¿‡ SSH åœ¨è¿œç¨‹æœåŠ¡å™¨å¼€å‘æˆ–åå¥½ Web ç•Œé¢ï¼Œè¯·ä½¿ç”¨ Web ç‰ˆæœ¬

ğŸ¯ **è§£å†³çš„é—®é¢˜**
- **è¿œç¨‹å¼€å‘é™åˆ¶**ï¼šSSH è¿æ¥æ— æ³•ä½¿ç”¨æœ¬åœ°å›¾å½¢ç•Œé¢
- **æœåŠ¡å™¨ç¯å¢ƒå…¼å®¹æ€§**ï¼šå®Œç¾é€‚é…æ— å¤´æœåŠ¡å™¨ç¯å¢ƒ
- **Web ç•Œé¢è®¿é—®**ï¼šé€šè¿‡ä»»ä½• Web æµè§ˆå™¨è®¿é—®åé¦ˆæ”¶é›†åŠŸèƒ½

ğŸ‘‰ **[è®¿é—® Web ç‰ˆæœ¬ â†’](https://github.com/weirdowaoo/feedback_collector_web)**

## ç•Œé¢é¢„è§ˆ

<table>
  <tr>
    <td align="center"><b>ä¸­æ–‡ç•Œé¢</b></td>
    <td align="center"><b>è‹±æ–‡ç•Œé¢</b></td>
  </tr>
  <tr>
    <td><img src="pic/UI_CN.png" alt="ä¸­æ–‡ç•Œé¢" width="400"/></td>
    <td><img src="pic/UI_EN.png" alt="è‹±æ–‡ç•Œé¢" width="400"/></td>
  </tr>
</table>

## ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªå·¥å…·ï¼Ÿ

åœ¨ä½¿ç”¨ Cursor æ—¶ï¼Œæ‚¨å¯èƒ½æ³¨æ„åˆ° AI åŠ©æ‰‹ç»å¸¸åœ¨å®Œæˆä¸€æ¬¡ä»»åŠ¡åå°±åœæ­¢äº†ï¼Œå³ä½¿å•æ¬¡è¯·æ±‚è¿˜æœ‰å¾ˆå¤šå·¥å…·è°ƒç”¨æ¬¡æ•°å¯ä»¥ä½¿ç”¨ã€‚è¿™å¯¼è‡´äº†èµ„æºæµªè´¹ï¼Œå› ä¸ºæ¯æ¬¡è¯·æ±‚ç†è®ºä¸Šå¯ä»¥è°ƒç”¨å¤šè¾¾ 25 æ¬¡å·¥å…·ã€‚

æœ¬ MCP å·¥å…·çš„æ ¸å¿ƒä½œç”¨æ˜¯ï¼š
- ğŸ”„ **å»¶ç»­å¯¹è¯**ï¼šåœ¨ä¸€æ¬¡å¿«é€Ÿ Request è¯·æ±‚ä¸­ï¼Œç¡®ä¿ AI åœ¨å®Œæˆä»»åŠ¡åä¸»åŠ¨è°ƒç”¨æœ¬ MCP å·¥å…·æ”¶é›†åé¦ˆï¼ˆè€Œä¸æ˜¯ç®€å•ç»ˆæ­¢æœ¬è½®å¯¹è¯ï¼‰ï¼Œä»¥ä¾¿ç»§ç»­åç»­ä»»åŠ¡
- ğŸ”¥ **ç‰©å°½å…¶ç”¨**ï¼šè®©æ¯æ¬¡å¿«é€Ÿ Request è¯·æ±‚éƒ½èƒ½**å……åˆ†åˆ©ç”¨ 25 æ¬¡å·¥å…·**è°ƒç”¨é…é¢
- ğŸ’° **ä¼˜åŒ–æˆæœ¬**ï¼šæœ€å¤§åŒ–æ¯æ¬¡å¿«é€Ÿ Request è¯·æ±‚çš„ä»·å€¼å›æŠ¥

## ä½¿ç”¨å‰åå¯¹æ¯”

|  | <div align="center">ä½¿ç”¨å‰</div> | <div align="center">ä½¿ç”¨å</div> |
|--|--------|--------|
| **å·¥ä½œæµç¨‹** | <div align="center">åœ¨ Agent æ¨¡å¼ä¸‹è¾“å…¥ï¼šå®Œæˆ &lt;ä»»åŠ¡ 1&gt;</div><div align="center">â¬‡</div><div align="center">ä»»åŠ¡å®Œæˆï¼Œæœ¬æ¬¡å¿«é€Ÿè¯·æ±‚ç»“æŸ</div> | <div align="center">åœ¨ Agent æ¨¡å¼ä¸‹è¾“å…¥ï¼šå®Œæˆ &lt;ä»»åŠ¡ 1&gt;</div><div align="center">â¬‡</div><div align="center">ä»»åŠ¡å®Œæˆï¼Œè°ƒç”¨åé¦ˆæ”¶é›†å™¨è·å–åé¦ˆ</div><div align="center">â¬‡</div><div align="center">åœ¨ MCP å·¥å…·ä¸­è¾“å…¥ï¼šå®Œæˆ &lt;ä»»åŠ¡ 2&gt;</div><div align="center">â¬‡</div><div align="center">ä»»åŠ¡å®Œæˆï¼Œè°ƒç”¨åé¦ˆæ”¶é›†å™¨è·å–åé¦ˆ</div><div align="center">â¬‡</div><div align="center">åœ¨ MCP å·¥å…·ä¸­è¾“å…¥ï¼šå®Œæˆ &lt;ä»»åŠ¡ 3&gt;</div><div align="center">â¬‡</div><div align="center">ä»»åŠ¡å®Œæˆï¼Œè°ƒç”¨åé¦ˆæ”¶é›†å™¨è·å–åé¦ˆ</div><div align="center">â¬‡</div><div align="center">......</div><div align="center">â¬‡</div><div align="center">ç›´åˆ°è¾¾åˆ° 25 æ¬¡å·¥å…·è°ƒç”¨é™é¢</div> |
| **æ¶ˆè€— Request ç»Ÿè®¡** | <div align="center">æ¶ˆè€— 1 æ¬¡ Request</div> | <div align="center">æ¶ˆè€— 1 æ¬¡ Request</div> |

## ç‰¹æ€§

- ğŸ¨ **æ·±è‰²ä¸»é¢˜ç•Œé¢**ï¼šä¸ Cursor ç¼–è¾‘å™¨ä¸€è‡´çš„æ·±è‰²é…è‰²æ–¹æ¡ˆ
- ğŸ“ **å¤šè¡Œæ–‡æœ¬åé¦ˆ**ï¼šæ”¯æŒå¤šè¡Œæ–‡æœ¬è¾“å…¥å’Œç¼–è¾‘
- ğŸ–¼ï¸ **å›¾ç‰‡åé¦ˆæ”¯æŒ**ï¼šæ”¯æŒå›¾ç‰‡é€‰æ‹©å’Œå‰ªè´´æ¿ç²˜è´´ï¼ŒåŒ…å«å›¾ç‰‡ç¼©ç•¥å›¾æ˜¾ç¤ºå’Œåˆ é™¤åŠŸèƒ½
- ğŸŒ **ä¸­è‹±æ–‡ç•Œé¢åˆ‡æ¢**ï¼šæ”¯æŒç•Œé¢è¯­è¨€åˆ‡æ¢
- âŒ¨ï¸ **å¿«æ·é”®æ”¯æŒ**ï¼šå¿«é€Ÿæäº¤ï¼ˆâŒ˜+Enter/Ctrl+Enterï¼‰å’Œå–æ¶ˆï¼ˆESCï¼‰æ“ä½œ

## ç³»ç»Ÿè¦æ±‚

- Python 3.8+
- tkinterï¼ˆé€šå¸¸éš Python å®‰è£…ï¼‰
- æ”¯æŒå›¾å½¢ç•Œé¢çš„ç¯å¢ƒ

## å®‰è£…

1. **å…‹éš†ä»“åº“**
```bash
git clone <repository-url>
cd feedback_collector
```

2. **åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ**
```bash
conda create -n feedback_collector python=3.11
conda activate feedback_collector
```

3. **å®‰è£…ä¾èµ–**
```bash
pip install -r requirements.txt
```

## MCP é…ç½®

åœ¨ Cursor çš„ MCP é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

### macOS/Linux é…ç½®

```json
{
  "mcpServers": {
    "feedback-collector": {
      "command": "/path/to/your/python",
      "args": [
        "/path/to/feedback_collector/src/server.py"
      ],
      "env": {
        "MCP_DIALOG_TIMEOUT": "600",
        "LANGUAGE": "CN"
      }
    }
  }
}
```

**é…ç½®æ–‡ä»¶ç¤ºä¾‹**: [mcp_config_example_for_mac_and_linux.json](config_example/mcp_config_example_for_mac_and_linux.json)

### Windows é…ç½®

**æ–¹æ³•ä¸€ï¼šç›´æ¥æ‰§è¡Œ Python**
```json
{
  "mcpServers": {
    "feedback-collector": {
      "command": "/path/to/your/conda/envs/feedback_collector/python.exe",
      "args": [
        "/path/to/feedback_collector/src/server.py"
      ],
      "env": {
        "MCP_DIALOG_TIMEOUT": "600",
        "LANGUAGE": "CN"
      }
    }
  }
}
```

**é…ç½®æ–‡ä»¶ç¤ºä¾‹**: [mcp_config_example_for_windows_1.json](config_example/mcp_config_example_for_windows_1.json)

**æ–¹æ³•äºŒï¼šä½¿ç”¨ cmd åŒ…è£…å™¨**
```json
{
  "mcpServers": {
    "feedback-collector": {
      "command": "cmd",
      "args": [
        "/c",
        "/path/to/your/conda/envs/feedback_collector/python.exe",
        "/path/to/feedback_collector/src/server.py"
      ],
      "env": {
        "MCP_DIALOG_TIMEOUT": "600",
        "LANGUAGE": "CN"
      }
    }
  }
}
```

**é…ç½®æ–‡ä»¶ç¤ºä¾‹**: [mcp_config_example_for_windows_2.json](config_example/mcp_config_example_for_windows_2.json)

**é…ç½®è¯´æ˜**ï¼š
- `command`: Python è§£é‡Šå™¨è·¯å¾„æˆ–ç³»ç»Ÿå‘½ä»¤
- `args`: ä¼ é€’ç»™å‘½ä»¤çš„å‚æ•°
- `MCP_DIALOG_TIMEOUT`: å¯¹è¯æ¡†è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 600 ç§’
- `LANGUAGE`: ç•Œé¢è¯­è¨€ï¼Œ`CN`ï¼ˆä¸­æ–‡ï¼‰æˆ– `EN`ï¼ˆè‹±æ–‡ï¼‰

![MCP æœåŠ¡å™¨é…ç½®](pic/MCP_server_configuration.png)

### è·å–è·¯å¾„

**macOS/Linux:**
```bash
# è·å– Python è·¯å¾„
conda activate feedback_collector
which python

# è·å–é¡¹ç›®è·¯å¾„
cd /path/to/feedback_collector
pwd
```

**Windows:**
```cmd
# è·å– Python è·¯å¾„
conda activate feedback_collector
python -c "import sys; print(sys.executable)"
```

## Project Rules é…ç½®

åœ¨ Cursor çš„ Project Rules ä¸­æ·»åŠ ä»¥ä¸‹è§„åˆ™ï¼ˆRule Type è®¾ç½®ä¸º Alwaysï¼‰ï¼Œç¡®ä¿æ¯æ¬¡ä»»åŠ¡å®Œæˆåè‡ªåŠ¨æ”¶é›†åé¦ˆï¼š

```
Any time you need to ask the user a question, make sure to use the <feedback-collector.collect_feedback> MCP.

After completing each user-specified task, the <feedback-collector.collect_feedback> mcp tool must be used to collect user feedback.

Before finishing a user Request, make sure to call the <feedback-collector.collect_feedback> MCP rather than just ending the task.

Keep calling <feedback-collector.collect_feedback> MCP until the user's feedback is empty, then end the Request.

If the ongoing task involves UI modifications, you should only complete the user's coding task and must not perform testing yourself. The correct approach is to prompt the user to test it themselves, and then use the <feedback-collector.collect_feedback> MCP tool to obtain their feedback.
```

**é…ç½®æ­¥éª¤**ï¼š
1. æ‰“å¼€ Cursor è®¾ç½®
2. æ‰¾åˆ° Project Rules é€‰é¡¹
3. æ·»åŠ æ–°è§„åˆ™ï¼Œå°†ä¸Šè¿°å†…å®¹ç²˜è´´è¿›å»
4. å°† Rule Type è®¾ç½®ä¸º `Always`
5. ä¿å­˜é…ç½®

![è§„åˆ™é…ç½®](pic/Rules_configuration.png)

## MCP å·¥å…·

### collect_feedback()
æ”¶é›†ç”¨æˆ·åé¦ˆçš„ä¸»è¦å·¥å…·ï¼š
- æ˜¾ç¤ºåé¦ˆæ”¶é›†ç•Œé¢
- æ”¯æŒæ–‡å­—å’Œå›¾ç‰‡åé¦ˆ
- è¿”å›ç»“æ„åŒ–çš„åé¦ˆæ•°æ®

## ä½¿ç”¨æ–¹æ³•

1. å®Œæˆä¸Šè¿° MCP é…ç½®å’Œ Project Rules é…ç½®
2. åœ¨ä¸ AI çš„å¯¹è¯ä¸­ï¼ŒAI å®Œæˆå½“å‰ä»»åŠ¡åä¼šè‡ªåŠ¨è°ƒç”¨åé¦ˆæ”¶é›†å™¨ï¼ˆè€Œä¸æ˜¯ç®€å•ç»ˆæ­¢æœ¬è½®å¯¹è¯ï¼‰
3. åœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­è¾“å…¥æ–‡å­—åé¦ˆæˆ–æ·»åŠ å›¾ç‰‡
4. ä½¿ç”¨å¿«æ·é”® `âŒ˜+Enter` ï¼ˆ Mac ï¼‰æˆ– `Ctrl+Enter` ï¼ˆ Windows/Linux ï¼‰æäº¤åé¦ˆï¼›æŒ‰ `ESC` é”®å–æ¶ˆæ“ä½œ
5. AI ä¼šåŸºäºåé¦ˆç»§ç»­è¿›è¡Œåç»­æ“ä½œï¼ˆä»¥è¾¾åˆ°å……åˆ†åˆ©ç”¨å•æ¬¡è¯·æ±‚æœ€å¤š 25 æ¬¡å·¥å…·è°ƒç”¨çš„ç›®çš„ï¼‰
> **é‡è¦æé†’**ï¼šå¼€å¯ `Cursor Settings -> Features -> Chat -> Enable auto-run mode` ä»¥è·å–æœ€ä¸æ»‘çš„ä½¿ç”¨ä½“éªŒï¼Œä½†éœ€æ³¨æ„ä¸€å®šè¦é…ç½®å¥½å‘½ä»¤çš„é»‘ç™½åå•ä»¥ä¿è¯å®‰å…¨

## é¡¹ç›®ç»“æ„

```
feedback_collector/
â”œâ”€â”€ README.md                 # é¡¹ç›®è¯´æ˜ï¼ˆè‹±æ–‡ï¼‰
â”œâ”€â”€ README_CN.md              # é¡¹ç›®è¯´æ˜ï¼ˆä¸­æ–‡ï¼‰
â”œâ”€â”€ requirements.txt          # ä¾èµ–åˆ—è¡¨
â””â”€â”€ src/                     # æºä»£ç ç›®å½•
    â”œâ”€â”€ server.py            # MCP æœåŠ¡å™¨å…¥å£
    â”œâ”€â”€ ui/                  # ç•Œé¢æ¨¡å—
    â”‚   â”œâ”€â”€ theme.py         # æ·±è‰²ä¸»é¢˜ç®¡ç†
    â”‚   â”œâ”€â”€ components.py    # macOS é£æ ¼ç»„ä»¶
    â”‚   â””â”€â”€ feedback_dialog.py # åé¦ˆæ”¶é›†å¯¹è¯æ¡†
    â”œâ”€â”€ core/                # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
    â”‚   â”œâ”€â”€ feedback_collector.py # åé¦ˆæ”¶é›†å™¨
    â”‚   â””â”€â”€ image_handler.py # å›¾ç‰‡å¤„ç†
    â””â”€â”€ utils/               # å·¥å…·å‡½æ•°
        â”œâ”€â”€ gui_utils.py     # GUI å·¥å…·å‡½æ•°
        â””â”€â”€ i18n.py          # å›½é™…åŒ–æ”¯æŒ
```
